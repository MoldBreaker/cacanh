
<div class="container mt-4">
    <div class="row">
    {{#each result}}
        <div class="card mt-4" style="width: 18rem;">
        <img src="/fish/image/{{this.maCa}}" class="card-img-top  fa-fade fa-2xs" alt="{{this.tenCa}}">
        <div class="card-body">
            <h5 class="card-title">{{this.tenCa}}</h5>
            <p class="card-text">{{this.gia}}</p>
            <a class="btn btn-primary add-to-cart" data-id="{{this.maCa}}">
                <i class="fa-solid fa-cart-shopping fa-beat fa-lg" data-id="{{this.maCa}}"></i>
            </a>
        </div>
        </div>
    {{/each}}
    </div>
</div>

<style>
    .card {
        margin: auto 20px 20px;
    }
    body{
          background: linear-gradient(to bottom, #33ccff 0%, #6666ff 100%);
    }
</style>

<script>
    

    $(document).ready(function() {
        let addToCartBtns = document.querySelectorAll('.add-to-cart');
        const url = 'http://localhost:3000';

        for(let i=0;i<addToCartBtns.length;i++) { 
            addToCartBtns[i].onclick = (e) => {
                $.ajax({
                url: url + '/add-to-cart/' + e.target.dataset.id, 
                
                success: function(result){
                    if(result.login == false){
                        window.location.href = '/login';
                    }
                    Swal.fire(
                        'Good job!',
                        'Thêm vào giỏ hàng thành công',
                        'success'
                    )
                }});
            }
        }

    });
</script>