<h1>Dashboard</h1>

<a href="/fish/add-fish">Add Fish</a>

<div class="container mt-4">
    <div class="row">
    {{#each fish}}
        <div class="card mt-4" style="width: 18rem;">
        <img src="/fish/image/{{this.maCa}}" class="card-img-top  fa-fade fa-2xs" alt="{{this.tenCa}}">
        <div class="card-body">
            <h5 class="card-title">{{this.tenCa}}</h5>
            <p class="card-text">{{this.gia}}</p>
            <a class="btn btn-primary" href="/fish/edit/{{this.maCa}}">Chỉnh sửa</a>
            <a class="btn btn-danger delete-btn" data-id="{{this.maCa}}" data-name="{{this.tenCa}}">Xoá</a>
        </div>
        </div>
    {{/each}}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    let deleteBtns = document.querySelectorAll('.delete-btn');
    
    for(let i=0;i<deleteBtns.length;i++){
        deleteBtns[i].onclick = (e) => {
            let comfirmDelete = confirm('Bạn có muốn xoá ' + e.target.dataset.name + ' không?');
            if(comfirmDelete) {
                window.location.href = '/fish/delete/' + e.target.dataset.id;
            }
        }
    }
</script>